# Oak Tree Blueprint
# A natural deciduous tree providing cover and resources

[meta]
id = "oak_tree"
name = "Oak Tree"
category = "tree"
origin = "natural"
description = "A mature oak tree with spreading canopy"

[parameters]
height = { type = "float", min = 8.0, max = 25.0, default = 15.0 }
canopy_radius = { type = "float", min = 3.0, max = 10.0, default = 5.0 }
trunk_radius = { type = "float", min = 0.3, max = 1.5, default = 0.5 }

[geometry]
width = "trunk_radius * 2"
depth = "trunk_radius * 2"
height = "height"
shape = "circle"

[stats.military]
max_hp = "height * 20"
hardness = "2"
cover_value = "0.5"
blocks_movement = "1"
blocks_los = "0"
movement_cost = "2"
flammable = "1"
elevation = "0"

[stats.civilian]
pedestrian_capacity = "0"
cart_accessible = "0"
worker_capacity = "0"
storage_capacity = "0"
prestige_modifier = "0.1"

[[damage_states]]
name = "healthy"
threshold = 0.75
visual_overlay = ""
tags = ["living", "harvestable"]
creates_breach = false
produces_rubble = false

[[damage_states]]
name = "damaged"
threshold = 0.25
visual_overlay = "damaged_bark"
tags = ["damaged"]
creates_breach = false
produces_rubble = false
[damage_states.overrides]
cover_value = 0.3

[[damage_states]]
name = "fallen"
threshold = 0.0
visual_overlay = "fallen_trunk"
tags = ["fallen", "obstacle"]
creates_breach = false
produces_rubble = true
[damage_states.overrides]
cover_value = 0.6
blocks_movement = false

[[constraints]]
description = "Canopy must be larger than trunk"
expression = "canopy_radius > trunk_radius * 2"
error_message = "Tree canopy radius must be at least twice the trunk radius"
